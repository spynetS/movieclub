{% extends "base.html" %}
{% block display %}


	<div class="container mx-auto pt-12 grid grid-cols-3 gap-12">
		<div class="col-span-2 flex flex-col gap-5" >
			<h1 class=" font-bold text-5xl mb-4">You Next Movie Night</h1>
			<div class="bg-base-300 w-full items-center justify-center flex h-42">
				<div class="flex gap-5">
					<div>
						<span class="countdown font-mono text-5xl" id="days">
							<span style="--value:0;" aria-live="polite" aria-label="0">0</span>
						</span>
						days
					</div>
					<div>
						<span class="countdown font-mono text-5xl" id="hours">
							<span style="--value:0;" aria-live="polite" aria-label="0">0</span>
						</span>
						hours
					</div>
					<div>
						<span class="countdown font-mono text-5xl" id="minutes">
							<span style="--value:0;" aria-live="polite" aria-label="0">0</span>
						</span>
						min
					</div>
					<div>
						<span class="countdown font-mono text-5xl" id="seconds">
							<span style="--value:0;" aria-live="polite" aria-label="0">0</span>
						</span>
						sec
					</div>
				</div>
			</div>

			<script>
			 // Set the date we're counting down to
			 const targetDate = new Date("{{ user.clubs.all.0.format_next_discussion }}").getTime(); // Change this to your target date

			 // Update the countdown every second
			 const countdownFunction = setInterval(() => {
				 const now = new Date().getTime();
				 const distance = targetDate - now;

				 // Time calculations for days, hours, minutes, and seconds
				 const days = Math.floor(distance / (1000 * 60 * 60 * 24));
				 const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
				 const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
				 const seconds = Math.floor((distance % (1000 * 60)) / 1000);

				 // Update the countdown display
				 document.getElementById("days").children[0].style.setProperty('--value', days);
				 document.getElementById("days").children[0].innerText = days;

				 document.getElementById("hours").children[0].style.setProperty('--value', hours);
				 document.getElementById("hours").children[0].innerText = hours;

				 document.getElementById("minutes").children[0].style.setProperty('--value', minutes);
				 document.getElementById("minutes").children[0].innerText = minutes;

				 document.getElementById("seconds").children[0].style.setProperty('--value', seconds);
				 document.getElementById("seconds").children[0].innerText = seconds;

				 // If the countdown is over, display a message
				 if (distance < 0) {
					 clearInterval(countdownFunction);
					 document.getElementById("days").children[0].innerText = "0";
					 document.getElementById("hours").children[0].innerText = "0";
					 document.getElementById("minutes").children[0].innerText = "0";
					 document.getElementById("seconds").children[0].innerText = "0";
					 // Optionally, display a message or take action when the countdown ends
				 }
			 }, 1000);
			</script>
			<p class="text-2xl font-semibold" >Polls</p>
			<div class="bg-base-300 w-full flex flex-row gap-12" >
				{% include "components/movies.html" with movies=user.movie_list.all %}
			</div>

		</div>
		<div class="bg-base-300">


		</div>

	</div>



{% endblock %}
